<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manila Branch - Café Delight</title>
    <link rel="stylesheet" href="Manila.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <div class="logo">
            <h1>Café Delight</h1>
        </div>
        <nav>
            <ul>
                <li><a href="Homepage.html">Home</a></li>
                <li><a href="Branches.html">Branches</a></li>
                <li><a href="#">Login</a></li>
                <li><a href="#">Sign Up</a></li>
            </ul>
        </nav>
    </header>

    <section class="branch-container">
        <div class="branch-description">
            <h2>Manila Branch</h2>
            <p>
                Welcome to Café Delight's Manila branch! Located in the heart of the city, our café offers a warm and inviting ambiance perfect for coffee lovers and casual diners. Enjoy our signature coffee blends, freshly baked pastries, and a cozy atmosphere that makes every visit a delight.
            </p>
            <p>
                Whether you're here for a quick coffee break or a relaxing afternoon, our Manila branch provides the perfect setting with comfortable seating, free Wi-Fi, and a friendly staff ready to serve you.
            </p>
        </div>

        <div class="slideshow-container">
            <div class="slide fade">
                <img src="Manila.jpg" alt="Manila Branch Image 1">
            </div>
            <div class="slide fade">
                <img src="Manila1.jpg" alt="Manila Branch Image 2">
            </div>
            <div class="slide fade">
                <img src="Manila2.jpg" alt="Manila Branch Image 3">
            </div>
        </div>
    </section>


    <script>
        let slideIndex = 0;
        function showSlides() {
            let slides = document.getElementsByClassName("slide");
            for (let i = 0; i < slides.length; i++) {
                slides[i].style.display = "none";
            }
            slideIndex++;
            if (slideIndex > slides.length) { slideIndex = 1; }
            slides[slideIndex - 1].style.display = "block";
            setTimeout(showSlides, 3000);
        }
        showSlides();
    </script>

        <!-- ========== REVIEW SYSTEM HTML ========== -->
        <div class="review-system-container">
            <!-- Header -->
            <div class="review-system-header">
              <div class="title">Reviews for Manila Branch</div>
              <button class="review-btn">Write a review</button>
            </div>
      
            <!-- Overall Rating & Distribution -->
            <div class="review-summary">
              <div class="average-rating">
                <h2>4.3</h2>
                <p>12 total</p>
              </div>
              <div class="distribution">
                <div class="distribution-row">
                  <span>5-star</span>
                  <div class="bar-bg">
                    <div class="bar-fill" style="width: 84%;"></div>
                  </div>
                  <span>84%</span>
                </div>
                <div class="distribution-row">
                  <span>4-star</span>
                  <div class="bar-bg">
                    <div class="bar-fill" style="width: 8%;"></div>
                  </div>
                  <span>8%</span>
                </div>
                <div class="distribution-row">
                  <span>3-star</span>
                  <div class="bar-bg">
                    <div class="bar-fill" style="width: 0%;"></div>
                  </div>
                  <span>0%</span>
                </div>
                <div class="distribution-row">
                  <span>2-star</span>
                  <div class="bar-bg">
                    <div class="bar-fill" style="width: 0%;"></div>
                  </div>
                  <span>0%</span>
                </div>
                <div class="distribution-row">
                  <span>1-star</span>
                  <div class="bar-bg">
                    <div class="bar-fill" style="width: 8%;"></div>
                  </div>
                  <span>8%</span>
                </div>
              </div>
            </div>
      
            <!-- Filter -->
            <div class="filter">
              <label for="star-filter">Filter by star rating:</label>
              <select id="star-filter" name="star-filter">
                <option value="all">All</option>
                <option value="5">5 Star</option>
                <option value="4">4 Star</option>
                <option value="3">3 Star</option>
                <option value="2">2 Star</option>
                <option value="1">1 Star</option>
              </select>
            </div>
      
            <!-- Existing Reviews -->
            <div class="review-list">
              <!-- data-owner="false" means no edit/delete buttons -->
              <div class="review-item" data-rating="5" data-owner="false">
                <h3>TE</h3>
                <div class="star-rating">★★★★★</div>
                <p>Best service ever! Thanks!</p>
                <small>Date of experience: October 10, 2022</small>
      
                <div class="helpful-actions">
                  <button class="helpful-btn">Helpful</button>
                  <button class="unhelpful-btn">Unhelpful</button>
                  <span class="helpful-count">0 found this helpful</span>
                </div>
              </div>
      
              <div class="review-item" data-rating="4" data-owner="false">
                <h3>DK</h3>
                <div class="star-rating">★★★★☆</div>
                <p>Really good, but there's some room for improvement.</p>
                <small>Date of experience: January 15, 2023</small>
      
                <div class="helpful-actions">
                  <button class="helpful-btn">Helpful</button>
                  <button class="unhelpful-btn">Unhelpful</button>
                  <span class="helpful-count">0 found this helpful</span>
                </div>
              </div>
      
              <!-- data-owner="true" shows edit/delete buttons -->
              <div class="review-item" data-rating="1" data-owner="true">
                <h3>JL</h3>
                <div class="star-rating">★☆☆☆☆</div>
                <p>Not satisfied at all.</p>
                <small>Date of experience: March 2, 2023</small>
      
                <div class="helpful-actions">
                  <button class="helpful-btn">Helpful</button>
                  <button class="unhelpful-btn">Unhelpful</button>
                  <span class="helpful-count">0 found this helpful</span>
                </div>
      
                <div class="review-actions">
                  <button class="edit-btn">Edit</button>
                  <button class="delete-btn">Delete</button>
                </div>
              </div>
            </div>
      
            <!-- Create a Review Form -->
            <div class="create-review">
              <h2>Write a Review</h2>
              <form id="create-review-form">
                <label for="name">Name:</label>
                <input type="text" id="name" name="name" required />
      
                <label>Your Rating:</label>
                <div class="rating-input">
                  <input type="radio" id="star5" name="rating" value="5" />
                  <label for="star5" title="5 stars">★</label>
      
                  <input type="radio" id="star4" name="rating" value="4" />
                  <label for="star4" title="4 stars">★</label>
      
                  <input type="radio" id="star3" name="rating" value="3" />
                  <label for="star3" title="3 stars">★</label>
      
                  <input type="radio" id="star2" name="rating" value="2" />
                  <label for="star2" title="2 stars">★</label>
      
                  <input type="radio" id="star1" name="rating" value="1" />
                  <label for="star1" title="1 star">★</label>
                </div>
      
                <label for="review-text">Review:</label>
                <textarea id="review-text" name="review-text" rows="4" required></textarea>
      
                <label for="review-media">Upload Image/Video:</label>
                <input
                  type="file"
                  id="review-media"
                  name="review-media"
                  accept="image/*,video/*"
                  multiple
                  class="review-media"
                />
      
                <button type="submit">Submit</button>
              </form>
            </div>
          </div>
      
          <!-- ========== REVIEW SYSTEM SCRIPT ========== -->
          <script>
            // ========== FILTER BY STAR RATING ==========
            const filterSelect = document.getElementById('star-filter');
            const reviewItems = document.querySelectorAll('.review-item');
      
            filterSelect.addEventListener('change', function () {
              const selectedValue = this.value;
              reviewItems.forEach((item) => {
                const itemRating = item.getAttribute('data-rating');
                if (selectedValue === 'all') {
                  item.style.display = 'block';
                } else {
                  if (itemRating === selectedValue) {
                    item.style.display = 'block';
                  } else {
                    item.style.display = 'none';
                  }
                }
              });
            });
      
            // ========== HELPFUL / UNHELPFUL ==========
            document.querySelectorAll('.review-item').forEach((review) => {
              const helpfulBtn = review.querySelector('.helpful-btn');
              const unhelpfulBtn = review.querySelector('.unhelpful-btn');
              const helpfulCountSpan = review.querySelector('.helpful-count');
              let helpfulCount = 0;
      
              helpfulBtn.addEventListener('click', () => {
                helpfulCount++;
                helpfulCountSpan.textContent = `${helpfulCount} found this helpful`;
              });
      
              unhelpfulBtn.addEventListener('click', () => {
                alert('Sorry this review was unhelpful!');
              });
            });
      
            // ========== EDIT / DELETE FOR REVIEW OWNER ==========
            reviewItems.forEach((item) => {
              const isOwner = item.getAttribute('data-owner') === 'true';
              const actions = item.querySelector('.review-actions');
              if (actions && !isOwner) {
                actions.style.display = 'none';
              }
            });
      
            document.querySelectorAll('.edit-btn').forEach((btn) => {
              btn.addEventListener('click', () => {
                const reviewItem = btn.closest('.review-item');
                const reviewTextP = reviewItem.querySelector('p');
                const originalText = reviewTextP.textContent;
      
                // Replace the text with an edit form
                reviewTextP.innerHTML = `
                  <textarea class="edit-textarea">${originalText}</textarea>
                  <button class="save-edit-btn">Save</button>
                  <button class="cancel-edit-btn">Cancel</button>
                `;
                const saveBtn = reviewTextP.querySelector('.save-edit-btn');
                const cancelBtn = reviewTextP.querySelector('.cancel-edit-btn');
      
                saveBtn.addEventListener('click', () => {
                  const newText = reviewTextP.querySelector('.edit-textarea').value;
                  reviewTextP.textContent = newText;
                });
      
                cancelBtn.addEventListener('click', () => {
                  reviewTextP.textContent = originalText;
                });
              });
            });
      
            document.querySelectorAll('.delete-btn').forEach((btn) => {
              btn.addEventListener('click', () => {
                const reviewItem = btn.closest('.review-item');
                const confirmed = confirm('Are you sure you want to delete this review?');
                if (confirmed) {
                  reviewItem.remove();
                }
              });
            });
      
            // ========== CREATE REVIEW (FRONT-END DEMO) ==========
            const createReviewForm = document.getElementById('create-review-form');
            createReviewForm.addEventListener('submit', (e) => {
              e.preventDefault();
              const name = document.getElementById('name').value.trim();
              const rating = document.querySelector('input[name="rating"]:checked');
              const reviewText = document.getElementById('review-text').value.trim();
              const mediaFiles = document.getElementById('review-media').files;
      
              if (!name || !rating || !reviewText) {
                alert('Please fill out all required fields.');
                return;
              }
      
              // Create a new DOM element for the review
              const newReview = document.createElement('div');
              newReview.classList.add('review-item');
              newReview.setAttribute('data-rating', rating.value);
              newReview.setAttribute('data-owner', 'true'); // new reviews are "owned" by user
      
              let stars = '';
              for (let i = 1; i <= 5; i++) {
                stars += i <= parseInt(rating.value) ? '★' : '☆';
              }
      
              const currentDate = new Date().toLocaleDateString();
      
              newReview.innerHTML = `
                <h3>${name}</h3>
                <div class="star-rating">${stars}</div>
                <p>${reviewText}</p>
                <small>Date of experience: ${currentDate}</small>
      
                <div class="helpful-actions">
                  <button class="helpful-btn">Helpful</button>
                  <button class="unhelpful-btn">Unhelpful</button>
                  <span class="helpful-count">0 found this helpful</span>
                </div>
      
                <div class="review-actions">
                  <button class="edit-btn">Edit</button>
                  <button class="delete-btn">Delete</button>
                </div>
              `;
      
              // If files were uploaded, list their names
              if (mediaFiles.length > 0) {
                const fileList = document.createElement('div');
                fileList.style.marginTop = '10px';
                fileList.innerHTML = `<strong>Uploaded Media:</strong>`;
                for (let i = 0; i < mediaFiles.length; i++) {
                  const file = mediaFiles[i];
                  const fileItem = document.createElement('p');
                  fileItem.textContent = file.name;
                  fileList.appendChild(fileItem);
                }
                newReview.appendChild(fileList);
              }
      
              // Insert the new review at the top of .review-list
              document.querySelector('.review-list').prepend(newReview);
      
              // Reset form
              createReviewForm.reset();
      
              // Re-apply logic to the newly added review
              attachHelpfulLogic(newReview);
              attachOwnerLogic(newReview);
            });
      
            function attachHelpfulLogic(review) {
              const helpfulBtn = review.querySelector('.helpful-btn');
              const unhelpfulBtn = review.querySelector('.unhelpful-btn');
              const helpfulCountSpan = review.querySelector('.helpful-count');
              let helpfulCount = 0;
      
              helpfulBtn.addEventListener('click', () => {
                helpfulCount++;
                helpfulCountSpan.textContent = `${helpfulCount} found this helpful`;
              });
      
              unhelpfulBtn.addEventListener('click', () => {
                alert('Sorry this review was unhelpful!');
              });
            }
      
            function attachOwnerLogic(review) {
              const isOwner = review.getAttribute('data-owner') === 'true';
              const actions = review.querySelector('.review-actions');
              if (!isOwner && actions) {
                actions.style.display = 'none';
              }
      
              // Edit
              const editBtn = review.querySelector('.edit-btn');
              if (editBtn) {
                editBtn.addEventListener('click', () => {
                  const reviewTextP = review.querySelector('p');
                  const originalText = reviewTextP.textContent;
                  reviewTextP.innerHTML = `
                    <textarea class="edit-textarea">${originalText}</textarea>
                    <button class="save-edit-btn">Save</button>
                    <button class="cancel-edit-btn">Cancel</button>
                  `;
                  const saveBtn = reviewTextP.querySelector('.save-edit-btn');
                  const cancelBtn = reviewTextP.querySelector('.cancel-edit-btn');
      
                  saveBtn.addEventListener('click', () => {
                    const newText = reviewTextP.querySelector('.edit-textarea').value;
                    reviewTextP.textContent = newText;
                  });
      
                  cancelBtn.addEventListener('click', () => {
                    reviewTextP.textContent = originalText;
                  });
                });
              }
      
              // Delete
              const deleteBtn = review.querySelector('.delete-btn');
              if (deleteBtn) {
                deleteBtn.addEventListener('click', () => {
                  const confirmed = confirm('Are you sure you want to delete this review?');
                  if (confirmed) {
                    review.remove();
                  }
                });
              }
            }
          </script>

        <footer>
            <p>&copy; 2025 Café Delight. All Rights Reserved.</p>
            <a href="#">Login</a> | <a href="#">Sign Up</a>
        </footer>

</body>
</html>
